server {
    listen 80;                         # Porta su cui il server ascolta
    server_name www.example.com;       # Nome del server (dominio)
    root /var/www/html;                # Directory root da cui servire i file
    client_max_body_size 2M;           # Limite massimo per la dimensione del corpo della richiesta

    # Pagina di errore personalizzata
    error_page 404 /404.html;          # Pagina da mostrare in caso di errore 404

    # Configurazione di una rotta
    location / {
        # Metodi HTTP accettati
        limit_except GET POST {
            deny all;
        }

        # Se Ã¨ una directory, servire index.html
        index index.html;

        # Disabilita il directory listing
        autoindex off;
    }

    # Configurazione di una rotta con CGI
    location /cgi-bin/ {
        fastcgi_pass unix:/var/run/php-fpm.sock;
        fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name;
        include fastcgi_params;
    }

    # Configurazione di upload file per POST
    location /upload {
        client_body_temp_path /tmp/client_body;
        upload_store /var/www/uploads;
        upload_pass /handle_upload.php;
    }

    # Redirezione
    location /old-page {
        return 301 /new-page;
    }
}
